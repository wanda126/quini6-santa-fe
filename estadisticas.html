<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<title>Estadísticas Quini6</title>
<link rel="stylesheet" href="estilos.css">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h2>Frecuencias y atrasos</h2>
<canvas id="freqChart" height="120"></canvas>
<h2>Pares / Impares</h2>
<canvas id="parChart" height="120"></canvas>
<h2>Decenas</h2>
<canvas id="decChart" height="120"></canvas>

<script>
let datos=[];
fetch('quini6_datos.json')
  .then(r=>r.json())
  .then(j=>{
     datos=j;
     stats();
   });

function stats(){
  const freq={},atraso={},dec={},parim={par:0,impar:0};
  // inicializo
  for(let n=0;n<=45;n++){freq[n]=0;atraso[n]=0;}
  // recorro
  datos.forEach((s,idx)=>{
     s.numeros.forEach(n=>{
        freq[n]++;
        atraso[n]=0;
     });
     // decenas
     s.numeros.forEach(n=>{
        const d=Math.floor(n/10);
        dec[d]=(dec[d]||0)+1;
     });
     // par/impar
     s.numeros.forEach(n=> n%2?parim.impar++:parim.par++);
     // aumento atraso de los NO salidos
     for(let k=0;k<=45;k++) if(!s.numeros.includes(k)) atraso[k]++;
  });

  // gráfico frecuencias
  new Chart(document.getElementById('freqChart'),{
     type:'bar',
     data:{
        labels:Array.from({length:46},(_,i)=>i),
        datasets:[{label:'Frecuencia',data:Object.values(freq),backgroundColor:'#004e92'}]
     },
     options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
  });
  // par/impar
  new Chart(document.getElementById('parChart'),{
     type:'doughnut',
     data:{
        labels:['Pares','Impares'],
        datasets:[{data:[parim.par,parim.impar],backgroundColor:['#28a745','#dc3545']}]
     }
  });
  // decenas
  new Chart(document.getElementById('decChart'),{
     type:'bar',
     data:{
        labels:['0-9','10-19','20-29','30-39','40-45'],
        datasets:[{label:'Cantidad',data:[dec[0]||0,dec[1]||0,dec[2]||0,dec[3]||0,(dec[4]||0)+(dec[5]||0)],backgroundColor:'#17a2b8'}]
     },
     options:{responsive:true,plugins:{legend:{display:false}},scales:{y:{beginAtZero:true}}}
  });
}
</script>
</body>
</html>
